# UI Demo 测试指南

## ✅ 构建成功！

恭喜！UI Demo 已经成功构建。现在可以在 Chrome 中加载并测试了。

## 快速开始

### 1. 加载插件到 Chrome

1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 启用右上角的"开发者模式"开关
4. 点击"加载已解压的扩展程序"
5. 选择项目的 `dist` 文件夹
6. 看到 "Smart Read AI" 插件图标即成功
7. **重要**: 如果之前已加载过扩展，请点击"重新加载"按钮（🔄图标）刷新扩展

### 2. 开始测试

#### 测试 1: 基础划词功能

1. 访问任意网页（推荐：https://github.com/facebook/react）
2. 选中至少 5 个字符的文本
3. 观察划词工具栏是否弹出
4. 检查工具栏位置是否正确（选中文本上方）
5. 检查动画是否流畅

**预期效果**：
- ✅ 工具栏平滑淡入（0.2秒）
- ✅ 工具栏包含"简化"、"解释"、"复制"三个按钮
- ✅ 按钮 hover 时有放大效果
- ✅ 3秒无操作自动消失

#### 测试 2: AI 简化功能

1. 选中一段技术描述文字
2. 点击"简化"按钮
3. 观察加载状态
4. 查看 Mock 结果

**预期效果**：
- ✅ 结果卡片在选中文本下方滑入
- ✅ 显示加载动画（Spinner + "AI 正在分析中..."）
- ✅ 1.5秒后显示 Mock 简化结果
- ✅ 卡片包含"原文"和"简化"两个区域

#### 测试 3: 术语解释功能

1. 选中一个技术术语（如 "React"、"TypeScript"、"API"）
2. 点击"解释"按钮
3. 查看预置的术语解释

**预期效果**：
- ✅ 显示该术语的详细解释
- ✅ 解释内容准确（来自预置术语库）
- ✅ 如果是未知术语，显示通用解释

#### 测试 4: 复制功能

1. 选中任意文本
2. 点击"复制"按钮
3. 观察 Toast 提示

**预期效果**：
- ✅ 显示"已复制到剪贴板" Toast 提示
- ✅ Toast 在右上角显示
- ✅ 2秒后自动消失
- ✅ 文本已复制到剪贴板（可以粘贴验证）

#### 测试 5: 结果卡片操作

1. 触发 AI 解析（简化或解释）
2. 等待结果显示
3. 测试以下操作：
   - 点击"−"按钮收起卡片
   - 点击"+"按钮展开卡片
   - 点击"复制"按钮
   - 点击"收藏"按钮
   - 点击"×"按钮关闭卡片

**预期效果**：
- ✅ 收起/展开动画流畅
- ✅ 复制按钮显示"已复制"反馈
- ✅ 收藏按钮显示"已收藏"反馈
- ✅ 关闭按钮正常工作

#### 测试 6: 跨网站兼容性

依次访问以下网站并测试划词功能：

1. **GitHub**: https://github.com/facebook/react
2. **掘金**: https://juejin.cn/
3. **知乎**: https://www.zhihu.com/
4. **CSDN**: https://blog.csdn.net/
5. **Stack Overflow**: https://stackoverflow.com/

**预期效果**：
- ✅ 所有网站上 UI 外观一致
- ✅ 无样式冲突
- ✅ 功能正常工作

#### 测试 7: 暗黑模式

1. 切换系统到暗黑模式（Windows: 设置 → 个性化 → 颜色 → 深色）
2. 刷新网页
3. 执行划词操作

**预期效果**：
- ✅ 工具栏自动切换为暗黑主题
- ✅ 结果卡片自动切换为暗黑主题
- ✅ 颜色对比度合适，文字清晰可读

## 已实现的功能

### ✅ 核心组件
- [x] 划词工具栏（SelectionToolbar）
- [x] 结果展示卡片（ResultCard）
- [x] Shadow DOM 样式隔离
- [x] Mock AI 响应系统
- [x] Mock 知识节点数据

### ✅ 交互功能
- [x] 文本选中监听
- [x] 工具栏智能定位
- [x] 工具栏自动隐藏（3秒）
- [x] 点击外部关闭
- [x] AI 简化（Mock）
- [x] 术语解释（Mock，100+ 预置术语）
- [x] 复制到剪贴板
- [x] 收藏到知识库（Mock）
- [x] Toast 通知

### ✅ 视觉效果
- [x] 淡入淡出动画
- [x] 滑入滑出动画
- [x] 按钮 hover 效果
- [x] 加载 Spinner
- [x] 暗黑模式自动适配

### ✅ 性能优化
- [x] GPU 加速动画
- [x] 事件防抖
- [x] 自动清理定时器

## 待实现的功能

### ⏸️ Popup 弹窗
- [ ] 知识检索界面
- [ ] Token 使用统计
- [ ] 快速设置面板

### ⏸️ Options 设置页
- [ ] AI 模型配置
- [ ] API 密钥管理
- [ ] 主题切换
- [ ] 数据管理

### ⏸️ 高级功能
- [ ] 代码解析（语法高亮）
- [ ] 公式解析（可视化）
- [ ] 知识图谱可视化
- [ ] 自然语言检索

## 已知问题

### CSP 警告（可忽略）

你可能会在 Chrome 控制台看到 CSP (Content Security Policy) 警告：

```
The Content Security Policy (CSP) prevents the evaluation of arbitrary strings...
```

**这是正常的！** 原因：
- 某些 React 依赖在内部可能触发 CSP 检测
- 我们已经配置了严格的 CSP 策略和 Terser 压缩
- 只要扩展功能正常工作，这个警告可以安全忽略

**验证方法**：
1. 选中文本，工具栏是否弹出？✅
2. 点击按钮，功能是否正常？✅
3. 如果都正常，CSP 警告不影响使用

详细信息请查看：[CSP 故障排除指南](./CSP_TROUBLESHOOTING.md)

### 当前限制
1. **仅 Mock 数据** - 所有 AI 响应使用预设数据
2. **无数据持久化** - 刷新后所有设置重置
3. **术语库有限** - 仅预置 100+ 常用术语
4. **Popup 未实现** - 点击插件图标显示默认 Popup

### 技术限制
1. **需要 Chrome 88+** - 使用了现代 Web API
2. **Shadow DOM 兼容性** - 部分老旧网站可能有问题

## 调试技巧

### 查看 Console 日志

1. 右键网页 → 检查 → Console
2. 查看 SmartRead AI 相关日志
3. 观察 Mock 数据输出

### 查看 Network 请求

虽然是 Mock 数据，但可以观察：
1. 延迟模拟（1.5秒）
2. 数据流转过程

### 性能监控

1. 打开 Chrome DevTools → Performance
2. 录制划词操作
3. 查看动画帧率（应保持 60 FPS）
4. 查看内存占用（应 < 30MB）

## 反馈

### 发现问题？

请记录以下信息：
- 问题描述
- 复现步骤
- 测试网站 URL
- Chrome 版本
- 截图或录屏

### 体验反馈

- UI 美观度: ⭐⭐⭐⭐⭐
- 交互流畅度: ⭐⭐⭐⭐⭐
- 功能易用性: ⭐⭐⭐⭐⭐
- 跨网站兼容性: ⭐⭐⭐⭐⭐

## 下一步

### 立即可做
1. ✅ 测试所有核心功能
2. ✅ 在多个网站验证兼容性
3. ✅ 测试暗黑模式
4. ✅ 收集反馈和问题

### 后续开发
1. ⏸️ 实现 Popup 弹窗
2. ⏸️ 实现 Options 设置页
3. ⏸️ 添加更多动画效果
4. ⏸️ 优化性能

---

**开始测试吧！** 🚀

有任何问题随时反馈！
